# 生产环境service对应的ingress
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: demo-prod
spec:
  entryPoints:
    - web
  routes:
    - match: Host(`prod.demo.com`) # 生产环境域名
      kind: Rule
      services:
        - name: bluegreen-active  # 与svc的name一致
          port: 80 # 与svc的port一致
---
# 预览环境service对应的ingress
apiVersion: traefik.containo.us/v1alpha1
kind: IngressRoute
metadata:
  name: demo-test
spec:
  entryPoints:
    - web
  routes:
    - match: Host(`test.demo.com`) # 测试环境域名
      kind: Rule
      services:
        - name: bluegreen-preview # 与svc的name一致
          port: 80 # 与svc的port一致